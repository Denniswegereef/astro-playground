const r=window,c=document.querySelector("html"),s=new Proxy({},{set:(i,t,n)=>{const e=i[t];return i[t]=n,e?.data&&n.eventIsBound&&!e?.eventIsBound&&l.$trigger(t,e.data),!0}});class m{_logging=!1;get logging(){return this._logging}set logging(t){this._logging=t}constructor(){this._logging=!1,u()}$on(t,n){s[t]?.callbackString===n.toString()&&r.removeEventListener(t,s[t].callbackWrapper,!1);const e=o=>n(o,d(o.detail,"data"),d(o.detail,"currentTarget"));r.addEventListener(t,e),this.logging&&console.log("Listening to event","--- Name:",t,"--- Callback:",n),s[t]={eventIsBound:!0,callbackString:n.toString(),callbackWrapper:e}}$trigger(t,n,e){const o=e?{currentTarget:e,data:n}:n,g=new CustomEvent(t,{detail:o});typeof s[t]>"u"&&(s[t]={eventIsBound:!1,data:n}),s[t].eventIsBound&&(this.logging&&console.log("Event triggered","--- Name:",t,"--- Params:",n,"--- currentTarget",e),r.dispatchEvent(g))}}const l=new m;l.$on("events::dom-reinit",()=>u());function u(){if(!c)return;f(c,t=>t.attributes&&[...t.attributes].some(n=>n.nodeName.substr(0,3)==="on:")).map(t=>{t._eventIsInitialised||([...t.attributes].filter(e=>e.name.slice(0,3)==="on:").map(e=>E(e.ownerElement,e.name,e.value)),t._eventIsInitialised=!0)})}function E(i,t,n){const e=t.split(/on:|\./),o=e[1],g=e.splice(1),[p,v]=w(n),h=a=>a===i;r.addEventListener(o,I(h,a=>{_(g,a),l.$trigger(p,v,i||void 0)}))}function _(i,t){i.map(n=>{(n==="prevent"||n==="preventDefault")&&t.preventDefault(),(n==="stop"||n==="stopPropagation")&&t.stopPropagation()})}function w(i){const t=i.split(new RegExp(/\(|\)/g));return[t[0],t[1]]}function I(i,t){return function(n){let e=n.target;for(i(e)&&t.apply(this,arguments);e=e?.parentNode;)if(i(e)){n.delegateTarget=e,t.apply(this,arguments);return}}}function f(i,t,n=[]){return i.children&&(t(i)&&n.push(i),i.children&&i.children.length&&[...i.children].map(e=>f(e,t,n))),n}function d(i,t){return i&&i[t]?i[t]:null}
