---
import Layout from "../layouts/Layout.astro";
import Link from "../components/link/link.astro";

import fg from 'fast-glob';

const collections: string[] = fg.sync("./src/pages/*", { onlyDirectories: false })

const routes = collections.map((collection) => {
  return collection.replace('./src/pages/', '/').replace('.astro', '')
})




// const routes = await Astro.glob("/src/pages/*").then((files) => {
//   return files
//     .map((file) => {
//       if (!file.url) return;

//       return file.url;
//     })
//     .filter((url) => url);
// });


---

<Layout title="Welcome to Astro.">
  <main>
    <ul>
      {
        routes.map((route) => (
          <li>
            <Link href={route} label={route} />
          </li>
        ))
      }
    </ul>
  </main>

  <style lang="scss"></style>
</Layout>
