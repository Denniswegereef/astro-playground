---
import Layout from "@/layouts/Layout.astro";
---

<Layout title="Resonating image">
  <picture>
    <source media="(max-width: 799px)" srcset="images/test_frame_1.png" />
    <source media="(min-width: 800px)" srcset="images/test_frame_2.png" />
    <img
      data-img-element
      src="images/test_frame_1.png"
      alt="Chris standing up holding his daughter Elva"
    />
  </picture>
</Layout>

<script>
  let currentSrc: string | undefined;
  const imgElement =
    document.querySelector<HTMLImageElement>("[data-img-element]");

  console.log(imgElement);

  const checkSrcChange = () => {
    if (imgElement?.currentSrc !== currentSrc) {
      currentSrc = imgElement?.currentSrc;
    }
  };

  // Initial check
  checkSrcChange();

  // Listen for window resize
  window.addEventListener("resize", checkSrcChange);
</script>

<style lang="scss">
  picture {
    display: inline-block;
    height: 500px;
    width: 650px;

    img {
      width: 100%;
    }
  }
</style>
